global:
    config_version: 2
input:
    type: file
    path: /opt/logs/log.txt
    fail_on_missing_logfile: false
grok:
    patterns_dir: ./patterns
metrics:
    - type: gauge
      name: battery_level
      help: The current Battery % level as defined in the UPS web interface
      path: /opt/logs/log.txt
      match: '%{GREEDYDATA:name},%{GREEDYDATA:status},%{NUMBER:battery_level}'
      value: '{{.battery_level}}'
      cumulative: false
      labels:
         name: '{{.name}}'
#
    - type: counter
      name: ups_status
      help: The status of the UPS backup
      path: /opt/logs/log.txt
      match: '%{GREEDYDATA:name},%{GREEDYDATA:status},%{NUMBER:battery_level}'
      cumulative: false      
      labels:
         name: '{{.name}}'
         status: '{{.status}}'
#
server:
    port: 9154