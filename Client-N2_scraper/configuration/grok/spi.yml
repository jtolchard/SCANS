global:
    config_version: 2
input:
    type: file
    path: /opt/logs/log.txt
    fail_on_missing_logfile: false
grok:
    patterns_dir: ./patterns
metrics:
    - type: gauge
      name: spi_pressure
      help: The pressure of AirLiquide N2 SPI 1
      path: /opt/logs/log.txt
      match: '%{GREEDYDATA:name},%{GREEDYDATA:measurement_time},%{NUMBER:spi_pressure},%{NUMBER:spi_flow}'
      value: '{{.spi_pressure}}'
      cumulative: false
      labels:
          name: '{{.name}}'
#
    - type: gauge
      name: spi_flow
      help: The flow of AirLiquide N2 SPI 1
      path: /opt/logs/log.txt
      match: '%{GREEDYDATA:name},%{GREEDYDATA:measurement_time},%{NUMBER:spi_pressure},%{NUMBER:spi_flow}'
      value: '{{.spi_flow}}'
      cumulative: false
      labels:
          name: '{{.name}}'
#
    - type: counter
      name: spi_last_measured
      help: The time of monitoring the AirLiquide N2 SPI
      path: /opt/logs/log.txt
      match: '%{GREEDYDATA:name},%{GREEDYDATA:measurement_time},%{NUMBER:spi_pressure},%{NUMBER:spi_flow}'
      cumulative: false      
      labels:
          name: '{{.name}}'
          measurement_time: '{{.measurement_time}}'

server:
    port: 9150

